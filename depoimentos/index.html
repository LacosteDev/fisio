<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- FAV ICON -->
    <link rel="icon" href="../favicon.ico" type="image/x-icon">
    <link rel="icon" href="../assets/icon.svg" type="image/svg+xml">
    <link rel="apple-touch-icon" href="../assets/icon.svg">
    <link rel="shortcut icon" href="../assets/icon.svg">

    <title>Erica Damasceno - Depoimentos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Montserrat:wght@300;400;500;600&display=swap"
        rel="stylesheet">
    <style>
        /* ...existing code from cursos.html <style> ... */
        html,
        body {
            height: 100%;
        }

        body {
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: #F8F8F8;
            color: #4A4A4A;
            scroll-behavior: smooth;
        }

        h1,
        h2,
        h3,
        h4 {
            font-family: 'Playfair Display', serif;
        }

        .bg-primary-dark {
            background-color: #785982;
        }

        .text-primary-dark {
            color: #785982;
        }

        .border-primary-dark {
            border-color: #785982;
        }

        .bg-primary-medium {
            background-color: #B695C0;
        }

        .text-primary-medium {
            color: #B695C0;
        }

        .bg-primary-light {
            background-color: #D0C5D6;
        }

        .text-primary-light {
            color: #D0C5D6;
        }

        .text-support-white {
            color: #fff !important;
        }

        .bg-support-primary {
            background-color: #785982 !important;
        }

        .text-primary-lightest {
            color: #F3EDF7;
        }

        .bg-secondary-dark {
            background-color: #C48D8A;
        }

        .text-secondary-dark {
            color: #C48D8A;
        }

        .bg-secondary-medium {
            background-color: #E2BEBE;
        }

        .text-secondary-medium {
            color: #E2BEBE;
        }

        .bg-secondary-light {
            background-color: #F5E3E1;
        }

        .text-secondary-light {
            color: #F5E3E1;
        }

        .nav-link:hover {
            color: #B695C0;
        }

        .btn-form {
            background-color: #785982;
            color: #fff;
            transition: background 0.2s, color 0.2s, box-shadow 0.2s;
        }

        .btn-form:hover,
        .btn-form:focus {
            background-color: #B695C0;
            color: #fff;
            box-shadow: 0 4px 16px rgba(120, 89, 130, 0.13);
        }

        @media (min-width: 768px) {
            .social-animate {
                transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
            }

            .social-animate:hover {
                transform: scale(1.12) translateY(-4px);
                box-shadow: 0 6px 18px rgba(120, 89, 130, 0.18);
                background-color: #B695C0 !important;
            }
        }

        .bg-white-pattern {
            background-color: #fff;
            background-image: url('../assets/padrao_lilas_2.png');
            background-repeat: repeat;
            background-size: 500px auto;
            position: relative;
            z-index: 0;
        }

        .bg-white-pattern::before {
            content: "";
            position: absolute;
            inset: 0;
            background: rgba(255, 255, 255, 0.88);
            z-index: 1;
            pointer-events: none;
        }

        .bg-white-pattern>* {
            position: relative;
            z-index: 2;
        }

        section.bg-white-pattern {
            position: relative;
            overflow: hidden;
        }

        @media (max-width: 767px) {
            footer .flex.md\:flex-row {
                flex-direction: column !important;
                align-items: center !important;
            }

            footer .mb-6.md\:mb-0 {
                margin-bottom: 0.75rem !important;
            }

            footer .flex.md\:flex-row .flex.md\:flex-row {
                flex-direction: column !important;
                align-items: center !important;
            }

            footer .flex.md\:flex-row .flex.md\:flex-row .flex {
                flex-direction: column !important;
                align-items: center !important;
                gap: 0 !important;
            }

            footer .text-primary-light {
                text-align: center !important;
                font-size: 0.75rem !important;
                margin-bottom: 0.5rem !important;
            }

            footer .h-10 {
                margin-left: auto !important;
                margin-right: auto !important;
            }
        }

        /* Estilos para a seção de depoimentos */
        #depoimentos-gallery {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }

        #depoimentos-gallery.section-visible {
            opacity: 1;
            transform: translateY(0);
        }

        /* Estilos do modal */
        #modal-overlay {
            opacity: 0;
            pointer-events: none;
        }

        #modal-overlay.opacity-100 {
            opacity: 1;
            pointer-events: all;
        }

        /* Setas do carrossel mobile */
        #modal-prev-mobile,
        #modal-next-mobile {
            display: none;
        }

        @media (max-width: 767px) {

            #modal-prev-mobile,
            #modal-next-mobile {
                display: block;
            }
        }

        #modal-mobile-instruction {
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.4s, transform 0.4s;
            transform: translate(-50%, -12px) scale(0.98);
            z-index: 110 !important;
            min-width: 260px;
            max-width: 90vw;
            width: 320px;
            justify-content: center;
            text-align: center;
            white-space: nowrap;
        }

        #modal-mobile-instruction.show {
            opacity: 1;
            pointer-events: auto;
            transform: translate(-50%, 0) scale(1);
        }

        @media (max-width: 767px) {
            #modal-overlay {
                /* Centraliza vertical e horizontal, mas limita altura máxima para não colar no topo/rodapé */
                align-items: center !important;
                justify-content: center !important;
                display: flex !important;
                padding-top: 56px !important;
                /* espaço para topbar */
                padding-bottom: 56px !important;
                /* espaço para barra android */
                box-sizing: border-box;
            }

            .modal-img-mobile {
                margin: 0 auto !important;
                margin-top: 0 !important;
                margin-bottom: 0 !important;
                max-width: 80vw;
                max-height: 60vh !important;
                width: auto;
                height: auto;
                display: block;
                object-fit: contain;
                border-radius: 1rem;
                box-shadow: 0 4px 24px rgba(0, 0, 0, 0.18);
                position: relative;
                z-index: 50;
            }

            #modal-mobile-instruction {
                top: 80%;
                left: 50%;
                transform: translate(-50%, 0);
                width: 100%;
                max-width: 80vw;
                min-width: unset;
                box-sizing: border-box;
                justify-content: center;
                text-align: center;
                white-space: nowrap;
                border-radius: 1rem;
            }

            #modal-mobile-close {
                display: flex !important;
                position: absolute;
                top: 8px;
                right: 8px;
                z-index: 120;
                background: rgba(0, 0, 0, 0.85);
                color: #fff;
                border-radius: 9999px;
                padding: 0.2rem 0.9rem 0.3rem 0.9rem;
                font-size: 2rem;
                font-weight: bold;
                align-items: center;
                justify-content: center;
                cursor: pointer;
                transition: background 0.2s;
                border: none;
                outline: none;
                box-shadow: 0 2px 8px rgba(0, 0, 0, 0.18);
            }
        }

        #modal-mobile-close {
            display: none;
            /* position, style, etc. set in media query */
        }

        #modal-mobile-close:active,
        #modal-mobile-close:hover {
            background: rgba(0, 0, 0, 1);
        }
    </style>
</head>

<body class="min-h-screen flex flex-col">
    <!-- Navigation -->
    <nav class="fixed w-full bg-white shadow-md z-50 transition-all duration-300">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <div>
                    <img src="../assets/marca.png" alt="Logo Erica Damasceno" loading="lazy" class="h-12 w-auto">
                </div>
                <div class="hidden md:flex space-x-8">
                    <a href="../index.html#home"
                        class="nav-link text-gray-700 hover:text-primary-medium transition">Início</a>
                    <a href="../index.html#services"
                        class="nav-link text-gray-700 hover:text-primary-medium transition">Serviços</a>
                    <a href="../index.html#testimonials"
                        class="nav-link text-gray-700 hover:text-primary-medium transition">Depoimentos</a>
                    <a href="../index.html#faq"
                        class="nav-link text-gray-700 hover:text-primary-medium transition">FAQ</a>
                    <a href="../index.html#contact"
                        class="nav-link text-gray-700 hover:text-primary-medium transition">Contato</a>
                </div>
                <button class="md:hidden focus:outline-none" id="mobile-menu-button">
                    <i class="fas fa-bars text-xl text-primary-dark"></i>
                </button>
            </div>
        </div>
        <!-- Custom Mobile Menu Overlay -->
        <div id="custom-mobile-menu-overlay"
            class="fixed inset-0 z-50 bg-black bg-opacity-40 pointer-events-none transition-all duration-300"
            style="display:none;">
            <!-- Menu lateral (não ocupa toda a tela) -->
            <div id="custom-mobile-menu-content"
                class="relative h-full flex flex-col items-start pl-8 pt-8 w-4/5 max-w-xs bg-white shadow-xl transform -translate-x-full transition-transform duration-300">
                <img src="../assets/marca.png" alt="Logo Erica Damasceno" loading="lazy" id="custom-mobile-menu-logo"
                    class="h-12 w-auto mb-14 opacity-0 translate-x-[-40px] transition-all duration-300">
                <nav class="flex flex-col gap-0 w-full">
                    <a href="../index.html#home"
                        class="custom-mobile-link text-lg font-semibold text-primary-dark opacity-0 translate-x-[-40px] transition-all duration-300 py-3">Início</a>
                    <hr class="border-t border-gray-200 w-[85%] ml-0">
                    <a href="../index.html#services"
                        class="custom-mobile-link text-lg font-semibold text-primary-dark opacity-0 translate-x-[-40px] transition-all duration-300 py-3">Serviços</a>
                    <hr class="border-t border-gray-200 w-[85%] ml-0">
                    <a href="../index.html#testimonials"
                        class="custom-mobile-link text-lg font-semibold text-primary-dark opacity-0 translate-x-[-40px] transition-all duration-300 py-3">Depoimentos</a>
                    <hr class="border-t border-gray-200 w-[85%] ml-0">
                    <a href="../index.html#faq"
                        class="custom-mobile-link text-lg font-semibold text-primary-dark opacity-0 translate-x-[-40px] transition-all duration-300 py-3">FAQ</a>
                    <hr class="border-t border-gray-200 w-[85%] ml-0">
                    <a href="../index.html#contact"
                        class="custom-mobile-link text-lg font-semibold text-primary-dark opacity-0 translate-x-[-40px] transition-all duration-300 py-3">Contato</a>
                </nav>
            </div>
        </div>
    </nav>

    <!-- Conteúdo central em branco -->
    <main class="pt-32 pb-32 md:pt-40 md:pb-40 bg-white-pattern flex-1">
        <div class="container mx-auto px-4">
            <h1 class="text-3xl md:text-4xl font-bold text-center text-primary-dark mb-12">Depoimentos em Imagem</h1>
            <!-- Grade Desktop / Grade Mobile -->
            <div id="depoimentos-gallery"
                class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 gap-6 md:gap-8 animate-section">
                <!-- Imagens serão inseridas via JS -->
            </div>
        </div>
        <!-- Modal de visualização -->
        <div id="modal-overlay"
            class="fixed inset-0 bg-black bg-opacity-70 z-[100] flex items-center justify-center transition-opacity duration-300 opacity-0 pointer-events-none">
            <button id="modal-close"
                class="absolute top-4 right-4 text-white text-3xl focus:outline-none z-60 md:block hidden">&times;</button>
            <div class="relative w-full flex justify-center items-center">
                <div class="relative flex flex-col items-center">
                    <!-- Setas desktop coladas à imagem com design do print -->
                    <div class="relative">
                        <button id="modal-prev" class="hidden md:flex absolute top-1/2 -translate-y-1/2 z-[51]" style="
                                left: -22px;
                                background: #000000;
                                border-radius: 50%;
                                width: 44px;
                                height: 44px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                                border: 2px solid #ffffff;
                                padding: 0;
                                cursor: pointer;
                            ">
                            <i class="fas fa-chevron-left text-white text-xl"></i>
                        </button>
                        <img id="modal-img" src="" alt="Depoimento"
                            class="modal-img-mobile max-h-[60vh] max-w-[80vw] rounded-lg shadow-2xl z-50 block md:block mx-auto">
                        <button id="modal-next" class="hidden md:flex absolute top-1/2 -translate-y-1/2 z-[51]" style="
                                right: -22px;
                                background: #000000;
                                border-radius: 50%;
                                width: 44px;
                                height: 44px;
                                display: flex;
                                align-items: center;
                                justify-content: center;
                                box-shadow: 0 2px 8px rgba(0,0,0,0.3);
                                border: 2px solid #ffffff;
                                padding: 0;
                                cursor: pointer;
                            ">
                            <i class="fas fa-chevron-right text-white text-xl"></i>
                        </button>
                        <!-- Botão fechar mobile (agora sobre a imagem) -->
                        <button id="modal-mobile-close" aria-label="Fechar modal" class="md:hidden">
                            &times;
                        </button>
                    </div>
                    <!-- Mensagem de instrução mobile -->
                    <div id="modal-mobile-instruction"
                        class="md:hidden absolute bg-black bg-opacity-80 text-white px-6 py-2 flex items-center gap-2 text-base font-medium z-[110] opacity-0 pointer-events-none transition-all duration-400">
                        Passe para ver mais
                        <span class="inline-flex items-center gap-1 ml-2">
                            <i class="fas fa-chevron-left"></i>
                            <span class="mx-1">|</span>
                            <i class="fas fa-chevron-right"></i>
                        </span>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-primary-dark text-white py-10 mt-auto">
        <div class="container mx-auto px-6">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <!-- Logo e direitos reservados -->
                <div class="mb-6 md:mb-0 flex flex-col items-center md:items-start w-full md:w-auto">
                    <img src="../assets/marca_cinza.png" alt="Logo Erica Damasceno" loading="lazy"
                        class="h-10 w-auto mb-2 mx-auto md:mx-0">
                    <div
                        class="text-primary-light text-xs md:text-base text-center md:text-left leading-tight mb-2 md:mb-0">
                        © 2025 Érica Damasceno. Todos os direitos reservados.
                    </div>
                </div>
                <!-- Links -->
                <div class="flex flex-col items-center md:flex-row md:space-x-6 w-full md:w-auto">
                    <div
                        class="flex flex-col items-center space-y-1 md:flex-row md:space-y-0 md:space-x-6 mt-2 md:mt-0">
                        <a href="#" id="open-terms"
                            class="text-primary-light hover:text-white transition text-sm md:text-base">Termos
                            de Uso</a>
                        <a href="#" id="open-privacy"
                            class="text-primary-light hover:text-white transition text-sm md:text-base">Política
                            de Privacidade</a>
                    </div>
                </div>
            </div>
        </div>
    </footer>

    <!-- Modal Termos de Uso -->
    <div id="modal-terms"
        class="fixed inset-0 z-[200] flex items-center justify-center bg-black bg-opacity-40 transition-all duration-300 opacity-0 pointer-events-none">
        <div class="bg-white rounded-2xl shadow-2xl max-w-lg w-[92vw] md:w-[520px] max-h-[90vh] flex flex-col relative">
            <button id="close-terms"
                class="absolute top-4 right-4 text-primary-dark text-2xl font-bold hover:text-primary-medium transition-colors focus:outline-none z-10"
                aria-label="Fechar">&times;</button>
            <div class="px-7 pt-8 pb-4 overflow-y-auto" style="max-height:70vh;">
                <h2 class="text-2xl font-bold mb-5 text-primary-dark">Termos de Uso</h2>
                <ol class="list-decimal list-inside space-y-4 text-gray-800 text-base">
                    <li>
                        <span class="font-semibold">Aceitação dos Termos</span><br>
                        Ao acessar e utilizar este site, você concorda e aceita os termos e condições aqui
                        estabelecidos.
                    </li>
                    <li>
                        <span class="font-semibold">Uso do Site</span><br>
                        O conteúdo deste site é destinado apenas para fins informativos sobre os serviços de
                        fisioterapia pélvica e sexualidade. Não utilizamos cookies ou coleta automática de dados.
                    </li>
                    <li>
                        <span class="font-semibold">Formulário de Contato</span><br>
                        O formulário de contato solicita apenas o nome e direciona a conversa para o WhatsApp. O contato
                        é iniciado pelo próprio usuário, de forma voluntária.
                    </li>
                    <li>
                        <span class="font-semibold">Links para Terceiros</span><br>
                        Este site pode conter links para redes sociais e outros sites externos. Não nos
                        responsabilizamos pelo conteúdo, políticas ou práticas de privacidade desses sites.
                    </li>
                    <li>
                        <span class="font-semibold">Alterações nos Termos</span><br>
                        Os termos de uso podem ser alterados a qualquer momento, sem aviso prévio. Recomendamos a
                        revisão periódica desta página.
                    </li>
                </ol>
            </div>
            <button
                class="bg-primary-dark hover:bg-primary-medium text-white font-medium py-3 px-8 rounded-full transition duration-300 transform hover:scale-105 text-center m-6 mt-2"
                id="close-terms-btn">
                Fechar
            </button>
        </div>
    </div>

    <!-- Modal Política de Privacidade -->
    <div id="modal-privacy"
        class="fixed inset-0 z-[200] flex items-center justify-center bg-black bg-opacity-40 transition-all duration-300 opacity-0 pointer-events-none">
        <div class="bg-white rounded-2xl shadow-2xl max-w-lg w-[92vw] md:w-[520px] max-h-[90vh] flex flex-col relative">
            <button id="close-privacy"
                class="absolute top-4 right-4 text-primary-dark text-2xl font-bold hover:text-primary-medium transition-colors focus:outline-none z-10"
                aria-label="Fechar">&times;</button>
            <div class="px-7 pt-8 pb-4 overflow-y-auto" style="max-height:70vh;">
                <h2 class="text-2xl font-bold mb-5 text-primary-dark">Política de Privacidade</h2>
                <ol class="list-decimal list-inside space-y-4 text-gray-800 text-base">
                    <li>
                        <span class="font-semibold">Coleta de Dados</span><br>
                        Não coletamos dados pessoais automaticamente. O único dado solicitado é o nome, caso o usuário
                        deseje entrar em contato via formulário.
                    </li>
                    <li>
                        <span class="font-semibold">Uso das Informações</span><br>
                        As informações fornecidas são utilizadas exclusivamente para responder ao contato do usuário.
                        Não compartilhamos dados com terceiros.
                    </li>
                    <li>
                        <span class="font-semibold">Redes Sociais e Links Externos</span><br>
                        O site contém links para redes sociais e outros sites externos. Ao acessar esses links, o
                        usuário estará sujeito às políticas de privacidade dessas plataformas.
                    </li>
                    <li>
                        <span class="font-semibold">Segurança</span><br>
                        Adotamos medidas para proteger as informações fornecidas, mas não nos responsabilizamos por
                        ações de terceiros ou incidentes fora do nosso controle.
                    </li>
                    <li>
                        <span class="font-semibold">Alterações nesta Política</span><br>
                        Esta política pode ser atualizada a qualquer momento. Consulte esta página regularmente para
                        estar ciente de eventuais mudanças.
                    </li>
                </ol>
            </div>
            <button
                class="bg-primary-dark hover:bg-primary-medium text-white font-medium py-3 px-8 rounded-full transition duration-300 transform hover:scale-105 text-center m-6 mt-2"
                id="close-privacy-btn">
                Fechar
            </button>
        </div>
    </div>
    <script>
        // Mobile menu animation (same as cursos.html)
        const menuBtn = document.getElementById('mobile-menu-button');
        const overlay = document.getElementById('custom-mobile-menu-overlay');
        const content = document.getElementById('custom-mobile-menu-content');
        const logo = document.getElementById('custom-mobile-menu-logo');
        const links = Array.from(document.querySelectorAll('.custom-mobile-link'));

        function openMenu() {
            overlay.style.display = 'block';
            setTimeout(() => {
                overlay.classList.remove('bg-opacity-0');
                overlay.classList.add('bg-opacity-40');
                content.classList.remove('-translate-x-full');
                content.classList.add('translate-x-0');
            }, 10);

            // Animate logo
            setTimeout(() => {
                logo.classList.remove('opacity-0', 'translate-x-[-40px]');
                logo.classList.add('opacity-100', 'translate-x-0');
            }, 350);

            // Animate links in sequence
            links.forEach((link, i) => {
                setTimeout(() => {
                    link.classList.remove('opacity-0', 'translate-x-[-40px]');
                    link.classList.add('opacity-100', 'translate-x-0');
                }, 500 + i * 100);
            });

            setTimeout(() => {
                overlay.style.pointerEvents = 'auto';
                document.body.style.overflow = 'hidden';
            }, 400);
        }

        function closeMenu() {
            overlay.classList.remove('bg-opacity-40');
            overlay.classList.add('bg-opacity-0');
            content.classList.remove('translate-x-0');
            content.classList.add('-translate-x-full');
            logo.classList.remove('opacity-100', 'translate-x-0');
            logo.classList.add('opacity-0', 'translate-x-[-40px]');
            links.forEach((link) => {
                link.classList.remove('opacity-100', 'translate-x-0');
                link.classList.add('opacity-0', 'translate-x-[-40px]');
            });
            overlay.style.pointerEvents = 'none';
            setTimeout(() => {
                overlay.style.display = 'none';
                document.body.style.overflow = '';
            }, 400);
        }

        menuBtn.addEventListener('click', openMenu);

        // Fecha ao clicar fora do menu lateral
        overlay.addEventListener('mousedown', function (e) {
            if (e.target === overlay) {
                closeMenu();
            }
        });

        // Fecha ao clicar em um link
        links.forEach(link => {
            link.addEventListener('click', function () {
                closeMenu();
            });
        });

        // Depoimentos - imagens
        const depoimentosCount = 14;
        const gallery = document.getElementById('depoimentos-gallery');
        const modalOverlay = document.getElementById('modal-overlay');
        const modalImg = document.getElementById('modal-img');
        const modalClose = document.getElementById('modal-close');
        const modalPrev = document.getElementById('modal-prev');
        const modalNext = document.getElementById('modal-next');

        let currentIdx = 0;

        // Cria as imagens na grade (desktop e mobile)
        for (let i = 1; i <= depoimentosCount; i++) {
            const img = document.createElement('img');
            img.src = `./assets/${i}.jpg`;
            img.alt = `Depoimento ${i}`;
            img.className = "rounded-lg shadow-md cursor-pointer transition-transform duration-200 hover:scale-105 w-full h-auto aspect-[3/4] object-cover animate-section";
            img.dataset.idx = i - 1;
            img.loading = "lazy";
            img.tabIndex = 0;
            gallery.appendChild(img);
        }

        const modalInstruction = document.getElementById('modal-mobile-instruction');
        const modalMobileClose = document.getElementById('modal-mobile-close');
        let instructionTimeout = null;
        let instructionVisible = false;

        // Função para mostrar a instrução com animação
        function showMobileInstruction() {
            if (modalInstruction) {
                modalInstruction.classList.add('show');
                instructionVisible = true;
                // Esconde após 2.5s
                instructionTimeout = setTimeout(hideMobileInstruction, 2500);
            }
        }
        // Função para esconder a instrução com animação
        function hideMobileInstruction() {
            if (modalInstruction) {
                modalInstruction.classList.remove('show');
                instructionVisible = false;
            }
            if (instructionTimeout) {
                clearTimeout(instructionTimeout);
                instructionTimeout = null;
            }
        }

        // --- MODAL DEPOIMENTOS (restaurado, isolado) ---
        function openDepoimentoModal(idx) {
            currentIdx = idx;
            modalImg.src = `./assets/${currentIdx + 1}.jpg`;
            modalOverlay.classList.remove('opacity-0', 'pointer-events-none');
            modalOverlay.classList.add('opacity-100');
            document.body.style.overflow = 'hidden';

            // MOBILE: mostra instrução animada e botão fechar
            if (window.innerWidth < 768) {
                showMobileInstruction();
                modalMobileClose.style.display = 'flex';
            } else {
                hideMobileInstruction();
                modalMobileClose.style.display = 'none';
            }

            // Adiciona histórico para botão voltar fechar modal
            history.pushState({ modalOpen: true }, '', '#modal');
        }

        function closeDepoimentoModal(triggeredByPopState = false) {
            modalOverlay.classList.add('opacity-0', 'pointer-events-none');
            modalOverlay.classList.remove('opacity-100');
            document.body.style.overflow = '';
            hideMobileInstruction();
            modalMobileClose.style.display = 'none';

            // Remove a entrada de histórico só se não foi chamado por um evento popstate
            if (window.location.hash === '#modal' && !triggeredByPopState) {
                history.replaceState(null, '', window.location.pathname);
            }
        }

        function showPrevDepoimento() {
            currentIdx = (currentIdx - 1 + depoimentosCount) % depoimentosCount;
            modalImg.src = `./assets/${currentIdx + 1}.jpg`;
            if (window.innerWidth < 768) hideMobileInstruction();
        }
        function showNextDepoimento() {
            currentIdx = (currentIdx + 1) % depoimentosCount;
            modalImg.src = `./assets/${currentIdx + 1}.jpg`;
            if (window.innerWidth < 768) hideMobileInstruction();
        }

        // Eventos para abrir modal (desktop e mobile)
        gallery.addEventListener('click', function (e) {
            if (e.target.tagName === 'IMG') {
                openDepoimentoModal(Number(e.target.dataset.idx));
            }
        });

        // Fechar modal depoimentos
        modalClose.addEventListener('click', () => closeDepoimentoModal());
        modalMobileClose.addEventListener('click', () => closeDepoimentoModal());
        // Fechar modal ao clicar em qualquer área fora da imagem/setas
        modalOverlay.addEventListener('click', function (e) {
            // Lista de elementos que NÃO devem fechar o modal quando clicados
            const excludedElements = [modalImg, modalPrev, modalNext];

            // Verifica se o clique foi em um dos elementos excluídos ou seus filhos
            let clickedOnExcluded = false;
            for (const element of excludedElements) {
                if (element && (e.target === element || element.contains(e.target))) {
                    clickedOnExcluded = true;
                    break;
                }
            }

            // Se não clicou em um elemento excluído, fecha o modal
            if (!clickedOnExcluded) {
                closeDepoimentoModal();
            }
        });

        document.addEventListener('keydown', function (e) {
            if (modalOverlay.classList.contains('opacity-100')) {
                if (e.key === 'Escape') closeDepoimentoModal();
                if (e.key === 'ArrowLeft' && window.innerWidth >= 768) showPrevDepoimento();
                if (e.key === 'ArrowRight' && window.innerWidth >= 768) showNextDepoimento();
            }
        });

        // Navegação setas (desktop)
        modalPrev.addEventListener('click', function (e) {
            e.stopPropagation(); // Evita fechar modal ao clicar na seta
            showPrevDepoimento();
        });
        modalNext.addEventListener('click', function (e) {
            e.stopPropagation();
            showNextDepoimento();
        });

        // Swipe para mobile
        let touchStartX = null;
        modalImg.addEventListener('touchstart', function (e) {
            if (e.touches.length === 1) {
                touchStartX = e.touches[0].clientX;
            }
        });
        modalImg.addEventListener('touchend', function (e) {
            if (touchStartX !== null && e.changedTouches.length === 1) {
                let dx = e.changedTouches[0].clientX - touchStartX;
                if (dx > 40) showPrevDepoimento();
                else if (dx < -40) showNextDepoimento();
                touchStartX = null;
            }
        });

        // Se o usuário tocar na instrução, ela some imediatamente
        if (modalInstruction) {
            modalInstruction.addEventListener('touchstart', hideMobileInstruction);
            modalInstruction.addEventListener('mousedown', hideMobileInstruction);
        }

        // Mostra/oculta setas e instrução conforme tela
        function updateModalArrows() {
            if (window.innerWidth < 768) {
                modalPrev.style.display = 'none';
                modalNext.style.display = 'none';
                modalClose.classList.add('hidden');
                modalMobileClose.style.display = 'flex';
            } else {
                modalPrev.style.display = '';
                modalNext.style.display = '';
                modalClose.classList.remove('hidden');
                modalMobileClose.style.display = 'none';
                hideMobileInstruction();
            }
        }
        window.addEventListener('resize', updateModalArrows);
        updateModalArrows();

        // Fecha modal ao clicar em voltar (history.back)
        window.addEventListener('popstate', function () {
            if (modalOverlay.classList.contains('opacity-100')) {
                closeDepoimentoModal(true);
            }
        });

        // Animação de fade-in ao rolar (IntersectionObserver)
        function animateSectionsWithObserver() {
            const sections = document.querySelectorAll('.animate-section');
            const observer = new window.IntersectionObserver((entries, obs) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('section-visible');
                        obs.unobserve(entry.target);
                    }
                });
            }, { threshold: 0.15 });
            sections.forEach(section => observer.observe(section));
        }
        window.addEventListener('DOMContentLoaded', animateSectionsWithObserver);

        // --- MODAIS TERMOS/PRIVACIDADE (nova lógica, isolada) ---
        function openLegalModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.remove('opacity-0', 'pointer-events-none');
            modal.classList.add('opacity-100');
            document.body.style.overflow = 'hidden';
        }
        function closeLegalModal(modalId) {
            const modal = document.getElementById(modalId);
            if (!modal) return;
            modal.classList.add('opacity-0', 'pointer-events-none');
            modal.classList.remove('opacity-100');
            document.body.style.overflow = '';
        }
        document.getElementById('open-terms').addEventListener('click', function (e) {
            e.preventDefault(); openLegalModal('modal-terms');
        });
        document.getElementById('open-privacy').addEventListener('click', function (e) {
            e.preventDefault(); openLegalModal('modal-privacy');
        });
        document.getElementById('close-terms').addEventListener('click', function () {
            closeLegalModal('modal-terms');
        });
        document.getElementById('close-terms-btn').addEventListener('click', function () {
            closeLegalModal('modal-terms');
        });
        document.getElementById('close-privacy').addEventListener('click', function () {
            closeLegalModal('modal-privacy');
        });
        document.getElementById('close-privacy-btn').addEventListener('click', function () {
            closeLegalModal('modal-privacy');
        });
        // Fecha modal ao clicar fora do conteúdo
        ['modal-terms', 'modal-privacy'].forEach(function (id) {
            document.getElementById(id).addEventListener('mousedown', function (e) {
                if (e.target === this) closeLegalModal(id);
            });
        });
    </script>
</body>

</html>